<h2>Nieuwe tenant</h2>
<form class="form" [formGroup]="tenantForm" (ngSubmit)="onSubmit()" novalidate>
  <div class="row">
    <brx-input-text label="Organisatie naam" name="name" formControlName="name" [errorMessages]="errorMessages.name"
                    sizeClasses="col-lg-3 col-md-5 col-sm-7 col-12"></brx-input-text>
  </div>
  <h2 class="clearfix">Adres
    <div class="float-right">
      <brx-button-create (click)="addAddress()">Adres</brx-button-create>
    </div>
  </h2>
  <div formArrayName="addresses" *ngFor="let address of tenantForm.get('addresses').controls; let i = index">
    <div [formGroupName]="i.toString()">
      <div class="row">
        <div class="col-11">
          <div class="row">
            <brx-input-checkbox (inputClick)="addressChangePrimary(i, $event)" sizeClasses="col-md-2 col-sm-7 col-12 col-lg-1" checkboxLabel="Ja/Nee" label="Primair"
                                name="is-primary-{{i}}"
                                formControlName="isPrimary"></brx-input-checkbox>
            <brx-input-text label="Postcode" name="postalCode-{{i}}" (change)="getAddressByApi(i)" formControlName="postalCode"
                            sizeClasses="col-lg-2 col-md-2 col-sm-3 col-4"></brx-input-text>
            <brx-input-text label="Huisnummer" brxType="number" name="houseNumber-{{i}}" (change)="getAddressByApi(i)" formControlName="houseNumber"
                            sizeClasses="col-lg-1 col-md-2 col-sm-2 col-3"></brx-input-text>
            <brx-input-text label="Toevoeging" name="suffix-{{i}}" formControlName="suffix" sizeClasses="col-lg-1 col-md-2 col-sm-2 col-4"></brx-input-text>
            <brx-input-text label="Straat" name="street-{{i}}" formControlName="street"
                            sizeClasses="col-lg-2 col-md-6 col-sm-7 col-12"></brx-input-text>
            <brx-input-text label="Stad" name="city-{{i}}" formControlName="city" sizeClasses="col-lg-2 col-md-6 col-sm-7 col-12"></brx-input-text>
            <brx-input-select-country label="Land" name="country-{{i}}" sizeClasses="col-lg-2 col-md-5 col-sm-6 col-12"
                                      formControlName="country"></brx-input-select-country>
          </div>
        </div>
        <div class="col-lg-1 col-md-2 col-sm-7 col-12 btn-delete align-items-end" *ngIf="tenantForm.get('addresses').controls.length > 1">
          <div class="form-group">
            <label class="d-lg-inline-block d-none">&nbsp;</label>
            <brx-button-warning (click)="removeAddress(i)">
              <brx-icon-delete color="#ffffff" transform="scale(1.2)"></brx-icon-delete>
            </brx-button-warning>
          </div>
        </div>

        <!--        ADDRESS PHONE NUMBERS START -->
        <div class="col-12 col-lg-6 col-address-phone-numbers">
          <div formArrayName="phoneNumbers" *ngFor="let phoneNumber of address.get('phoneNumbers').controls; let x = index">
            <div [formGroupName]="x.toString()">
              <div class="row">
                <brx-input-text label="Telefoonnummer" type="phone" name="address-phoneNumber-{{x}}" formControlName="phoneNumber"
                                sizeClasses="col-lg-6 col-md-4 col-sm-6 col-8" [errorMessages]="errorMessages.address">
                  <brx-input-phone-number-country-code formControlName="country" [default]="address.get('country').value" input-prepend></brx-input-phone-number-country-code>
                </brx-input-text>
                <brx-input-checkbox checkboxLabel="Ja/Nee" label="Primair" formControlName="isPrimary" name="address-phone-is-primary-{{x}}"
                                    sizeClasses="col-lg-2 col-md-2 col-sm-7 col-12"></brx-input-checkbox>
                <div class="form-group col-lg-2">
                  <label class="d-lg-inline-block d-none">&nbsp;</label>
                  <div class="d-flex">
                    <brx-button-create *ngIf="x === 0" (click)="addAddressPhoneNumber(address.get('phoneNumbers'))"></brx-button-create>
                    <brx-button-warning *ngIf="address.get('phoneNumbers').length > 1" (click)="removeAddressPhoneNumber(x, address.get('phoneNumbers'))">
                      <brx-icon-delete color="#ffffff" transform="scale(1.2)"></brx-icon-delete>
                    </brx-button-warning>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--        ADDRESS PHONE NUMBERS END -->
        <!--       ADDRESS EMAIL ADDRESSES START -->
        <div class="col-12 col-md-6">
          <div formArrayName="emailAddresses" *ngFor="let emailAddres of address.get('emailAddresses').controls; let z = index">
            <div [formGroupName]="z.toString()">
              <div class="row">
                <brx-input-text label="Email" type="email" name="address-email-{{z}}" formControlName="email"
                                sizeClasses="col-lg-3 col-md-6 col-sm-7 col-12" [errorMessages]="errorMessages.address">
                </brx-input-text>
                <brx-input-checkbox checkboxLabel="Ja/Nee" label="Primair" formControlName="isPrimary" name="address-email-is-primary-{{z}}"
                                    sizeClasses="col-md-2 col-sm-7 col-12 col-lg-2"></brx-input-checkbox>
                <div class="form-group">
                  <label class="d-lg-inline-block d-none">&nbsp;</label>
                  <div class="d-flex col-lg-2">
                    <brx-button-create *ngIf="z === 0" (click)="addAddressEmail(address.get('emailAddresses'))"></brx-button-create>
                    <brx-button-warning *ngIf="address.get('emailAddresses').length > 1" (click)="removeAddressEmail(z, address.get('emailAddresses'))">
                      <brx-icon-delete color="#ffffff" transform="scale(1.2)"></brx-icon-delete>
                    </brx-button-warning>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--       ADDRESS EMAIL ADDRESSES END -->
      </div>
      <hr/>
    </div>
  </div>
  <button type="submit" [disabled]="!tenantForm.valid">Submit</button>
</form>
